{"componentChunkName":"component---src-templates-post-template-jsx","path":"/recaptcha/@nonoll/42wuxk","result":{"data":{"site":{"siteMetadata":{"title":"nonoll","subtitle":"nonoll","author":{"name":"nonoll","twitter":""},"disqusShortname":"nonoll-github-io","url":"https://nonoll.github.io/"}},"markdownRemark":{"id":"92083d96-c438-562c-a22e-bc4f3451c4b0","html":"<h1>ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty</h1>\n<h2>1. recaptcha 적용 Script</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token constant\">G_RECAPTCHA_CALL_BACK</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>grecaptcha<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'recaptcha'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        sitekey <span class=\"token punctuation\">:</span> <span class=\"token string\">'SITE_KEY'</span><span class=\"token punctuation\">,</span>\n        size <span class=\"token punctuation\">:</span> <span class=\"token string\">'normal'</span><span class=\"token punctuation\">,</span>\n        theme <span class=\"token punctuation\">:</span> <span class=\"token string\">'light'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">var</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;script/>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://www.google.com/recaptcha/api.js?onload=G_RECAPTCHA_CALL_BACK&amp;render=explicit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>2. 발생이슈</h2>\n<h3>2-1. ie9 에서 발생</h3>\n<h3>2-2. 발생 에러</h3>\n<ul>\n<li>ReCAPTCHA placeholder element must be empty</li>\n<li>또는 Invalid ReCAPTCHA client id: undefined</li>\n</ul>\n<h2>3. 이슈 원인</h2>\n<h3>3-1. ie9 에서 callback 이 2번 호출되는 현상 확인</h3>\n<h3>4. 이슈 대응 코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> hasRecaptcha <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token constant\">G_RECAPTCHA_CALL_BACK</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasRecaptcha<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n \n    hasRecaptcha <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    window<span class=\"token punctuation\">.</span>grecaptcha<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'recaptcha'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        sitekey <span class=\"token punctuation\">:</span> <span class=\"token string\">'SITE_KEY'</span><span class=\"token punctuation\">,</span>\n        size <span class=\"token punctuation\">:</span> <span class=\"token string\">'normal'</span><span class=\"token punctuation\">,</span>\n        theme <span class=\"token punctuation\">:</span> <span class=\"token string\">'light'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">var</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;script/>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://www.google.com/recaptcha/api.js?onload=G_RECAPTCHA_CALL_BACK&amp;render=explicit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","fields":{"tagSlugs":["/tags/javascript/","/tags/kr/","/tags/ie-9/","/tags/busy/"]},"frontmatter":{"title":"ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty","tags":["javascript","kr","ie9","busy"],"date":"2018-02-27T05:35:57Z","description":"ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty 1. recaptcha 적용 Script  function GRECAPTCHACALL_BACK() {     window.grecaptcha.render('recaptcha', {         sitekey : 'SITE_KEY',..."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/recaptcha/@nonoll/42wuxk"}}}