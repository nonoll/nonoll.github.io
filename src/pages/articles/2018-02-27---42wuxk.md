---
title: "ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty"
author: nonoll
date: "2018-02-27T05:35:57Z"
layout: post
draft: false
path: "/recaptcha/@nonoll/42wuxk"
category: "javascript"
tags:
  - "javascript"
  - "kr"
  - "ie9"
  - "busy"
description: "ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty 1. recaptcha 적용 Script  function GRECAPTCHACALL_BACK() {     window.grecaptcha.render('recaptcha', {         sitekey : 'SITE_KEY',..."
---
# ReCAPTCHA - IE9 Error ReCAPTCHA placeholder element must be empty

## 1. recaptcha 적용 Script
```javascript

function G_RECAPTCHA_CALL_BACK() {
    window.grecaptcha.render('recaptcha', {
        sitekey : 'SITE_KEY',
        size : 'normal',
        theme : 'light'
    });
}
 
var tag = $('<script/>').attr('src', 'https://www.google.com/recaptcha/api.js?onload=G_RECAPTCHA_CALL_BACK&render=explicit');
$('head').append(tag);

```

## 2. 발생이슈

### 2-1. ie9 에서 발생

### 2-2. 발생 에러
- ReCAPTCHA placeholder element must be empty
- 또는 Invalid ReCAPTCHA client id: undefined

## 3. 이슈 원인

### 3-1. ie9 에서 callback 이 2번 호출되는 현상 확인

### 4. 이슈 대응 코드
```javascript

var hasRecaptcha = false;
function G_RECAPTCHA_CALL_BACK() {
    if (hasRecaptcha) {
        return;
    }
 
    hasRecaptcha = true;
    window.grecaptcha.render('recaptcha', {
        sitekey : 'SITE_KEY',
        size : 'normal',
        theme : 'light'
    });
}
 
var tag = $('<script/>').attr('src', 'https://www.google.com/recaptcha/api.js?onload=G_RECAPTCHA_CALL_BACK&render=explicit');
$('head').append(tag);

```